{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-4">
        <h2 class="fw-bold text-info">All Appointments</h2>
    </div>

    {% if appointments %}
    <div class="table-responsive shadow rounded p-3 bg-light">
        <table class="table table-hover align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Pet</th>
                    <th>Owner</th>
                    <th>Service</th>
                    <th>Scheduled At</th>
                    <th>Status</th>
                    <th>Total Payable</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                <tr>
                    <td>{{ appointment.id }}</td>
                    <td>{{ appointment.pet.name }}</td>
                    <td>{{ appointment.owner.name }}</td>
                    <td>{{ appointment.service }}</td>
                    <td>{{ appointment.scheduled_at }}</td>
                    <td>{{ appointment.status }}</td>
                    <td>‚Ç±{{ "%.2f"|format(appointment.total_payable) }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('admin_appointment_delete', id=appointment.id) }}" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger mb-1"
                                onclick="return confirm('Are you sure you want to delete this appointment?')">
                                üóëÔ∏è Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Back to Dashboard Button -->
    <div class="text-center mt-4">
        <a href="{{ url_for('dashboard') }}" class="btn btn-info btn-lg">
            ‚Üê Back to Dashboard
        </a>
    </div>

    {% else %}
    <div class="text-center mt-5">
        <p class="fs-5">No appointments found.</p>

        <!-- Back to Dashboard Button -->
        <div class="mt-4">
            <a href="{{ url_for('dashboard') }}" class="btn btn-info btn-lg">
                ‚Üê Back to Dashboard
            </a>
        </div>
    </div>
    {% endif %}
</div>

<style>
/* Table Hover Effect */
.table-hover tbody tr:hover {
    background-color: #e0f7fa;
    transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

/* Button Styles */
.btn-info {
    background: linear-gradient(45deg, #17a2b8, #0dcaf0);
    color: #fff;
    border: none;
    transition: transform 0.2s, box-shadow 0.2s;
}

.btn-info:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    color: #fff;
}

/* Scrollbar Styling */
.table-responsive::-webkit-scrollbar {
    width: 8px;
}

.table-responsive::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 10px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.2);
    border-radius: 10px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .table-responsive {
        font-size: 0.9rem;
    }
}
</style>
{% endblock %}
